<!DOCTYPE html>
<html lang="fr" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{{ block('title') ?? 'Dashboard' }}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root {
            --bg: #f5f5f5;
            --text: #111;
            --card: #fff;
            --sidebar-width: 240px;
        }
        [data-theme="dark"] {
            --bg: #0f0f0f;
            --text: #f5f5f5;
            --card: #1a1a1a;
        }

        body {
            background: var(--bg);
            color: var(--text);
            transition: .3s;
        }

        /* ------------------------- */
        /* SIDEBAR DESKTOP           */
        /* ------------------------- */
        .sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            background: var(--card);
            position: fixed;
            top: 0;
            left: 0;
            border-right: 1px solid #ddd;
            padding-top: 20px;
        }

        .sidebar a {
            display: block;
            padding: 12px 20px;
            color: var(--text);
            text-decoration: none;
            font-size: 1.1rem;
        }
        .sidebar a:hover {
            background: rgba(0,0,0,0.06);
        }

        /* CONTENT desktop */
        .content {
            margin-left: var(--sidebar-width);
            padding: 20px;
        }


        /* ------------------------- */
        /* TOPBAR MOBILE + TABLETTE  */
        /* ------------------------- */
        .topbar {
            display: none;
            width: 100%;
            height: 60px;
            background: var(--card);
            border-bottom: 1px solid #ddd;
            padding: 0 15px;

            display: flex;
            align-items: center;
            justify-content: space-between;

            position: fixed;
            top: 0;
            z-index: 900;
        }

        .topbar-logo {
            font-size: 1.4rem;
            font-weight: bold;
            text-align: center;
            margin: 0 auto;
            color: var(--text);
        }

        .burger {
            font-size: 2rem;
            cursor: pointer;
            color: var(--text);
        }

        /* ------------------------- */
        /* MOBILE DRAWER (slide menu) */
        /* ------------------------- */

        .drawer {
            position: fixed;
            top: 0;
            right: -260px;
            width: 260px;
            height: 100vh;
            background: var(--card);
            border-left: 1px solid #ccc;
            box-shadow: -4px 0 14px rgba(0,0,0,0.15);

            transition: right .3s ease;
            padding-top: 60px;
            z-index: 1000;
        }

        .drawer.open {
            right: 0;
        }

        .drawer a {
            display: block;
            padding: 16px;
            text-decoration: none;
            color: var(--text);
            font-size: 1.2rem;
        }
        .drawer a:hover {
            background: rgba(0,0,0,0.05);
        }

        /* ------------------------- */
        /* RESPONSIVE RULES          */
        /* ------------------------- */

        @media(max-width: 992px) {
            .sidebar {
                display: none;
            }
            .topbar {
                display: flex;
            }
            .content {
                margin-left: 0;
                margin-top: 70px;
                padding-bottom: 20px;
            }
        }

    </style>
</head>

<body data-theme="light">

<!-- SIDEBAR DESKTOP -->
<div class="sidebar d-none d-lg-block">
    <a href="{{ path('app_dashboard') }}">üè† Dashboard</a>
    <a href="{{ path('app_user_prestations') }}">üìù Prestations</a>
    <a href="{{ path('admin') }}">üë§ Admin</a>
    <a href="{{ path('app_user_profil') }}">Mon compte</a>
    <a href="#" id="toggle-theme-desktop">üåô Mode Sombre</a>
</div>

<!-- TOPBAR MOBILE -->
<div class="topbar d-flex d-lg-none">
    <div style="width:30px;"></div> <!-- espace pour centrer -->
    <div class="topbar-logo">LOGO</div>
    <div class="burger" id="burger-btn">‚ò∞</div>
</div>

<!-- DRAWER MOBILE -->
<div class="drawer" id="drawer">
    <a href="{{ path('app_dashboard') }}">üè† Dashboard</a>
    <a href="{{ path('app_user_prestations') }}">üìù Prestations</a>
    <a href="{{ path('admin') }}">üë§ Admin</a>
    <a href="{{ path('app_user_profil') }}">Mon compte</a>
    <a href="#" id="toggle-theme-mobile">üåô Mode Sombre</a>
</div>

<!-- CONTENT -->
<main class="content container">
    {% block content %}{% endblock %}
</main>


<script>
/* ---------- THEME ---------- */
function applyTheme() {
    document.body.dataset.theme = localStorage.getItem('theme') || "light";
}
applyTheme();

document.getElementById('toggle-theme-desktop')?.addEventListener('click', () => {
    const theme = document.body.dataset.theme === "light" ? "dark" : "light";
    document.body.dataset.theme = theme;
    localStorage.setItem('theme', theme);
});

document.getElementById('toggle-theme-mobile')?.addEventListener('click', () => {
    const theme = document.body.dataset.theme === "light" ? "dark" : "light";
    document.body.dataset.theme = theme;
    localStorage.setItem('theme', theme);
});

/* ---------- BURGER MENU ---------- */
const drawer = document.getElementById("drawer");
document.getElementById("burger-btn").addEventListener("click", () => {
    drawer.classList.toggle("open");
});

// fermer en cliquant en dehors
document.addEventListener("click", (e) => {
    if (!drawer.contains(e.target) && !e.target.closest("#burger-btn")) {
        drawer.classList.remove("open");
    }
});
</script>

</body>
</html>
